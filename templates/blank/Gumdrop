
Gumdrop.configure do

  #  All the gumdrop specific configuration settings and their defaults:

  # relative_paths= true
  # relative_paths_exts= %w(.html .htm .php)
  # default_layout= 'site'
  # layout_exts= %w(.html .htm .php)
  # proxy_enabled= false
  # output_dir= "./output"
  # source_dir= "./source"
  # data_dir= './data'
  # log= STDOUT
  # log_level= :info
  # ignore= %w(**/.DS_Store .git* .git/**/* .svn/**/* **/.sass-cache/**/* Gumdrop)
  # blacklist= []
  # server_timeout= 5
  # server_port= 4567
  # env= :production
  # file_change_test= :checksum


  # server= "REMOTE_USERNAME"
  # server_user= 'server.com'
  # server_path= '~/server.com'

end


# Ignore these files when loading from the source_dir
# Gumdrop.ignore 'file-to-ignore.html'
# Gumdrop.ignore 'dont-show/**/*'

# Exclude content from the source tree from being generated.
# Gumdrop.blacklist 'pages/**/*.*'

#  NOTE: Skipping and ignoring matches like a file glob (it use File.fnmatch in fact)
#       (this doesn't work for files detected by stitch/sprockets)

# Example generator
Gumdrop.generate "Examples" do
  
  #  Requires a about.template.XX file
  # page "about.html", 
  #   :template=>'about', 
  #   :passthru=>'Available in the template'

  # page 'robots.txt' do
  #   # And content returned will be put in the file
  #   """
  #   User-Agent: *
  #   Disallow: /
  #   """
  # end

  #  Maybe for a tumblr-like pager
  # pager= Gumdrop.data.pager_for :posts, base_path:'posts/page', page_size:5

  # pager.each do |page|
  #   page "#{page.uri}.html", 
  #     template:'post_page', 
  #     posts:page.items, 
  #     pager:pager, 
  #     current_page:pager.current_page
  # end

  #  Assemble javscript files in a CommonJS-like way with stitch-rb
  # stitch 'app.js',        # JavaScript to assemble
  #   :identifier=>'app',   # variable name for the library
  #   :paths=>['./app'],
  #   :root=>'./app', 
  #   :dependencies=>[],    # List of scripts to prepend to top of file (non moduled)
  #   :prune=>false,        # If true, removes the source files from Gumdrop.site hash
  #   :compress=>:jsmin,    # Options are :jsmin, :yuic, :uglify
  #   :obfuscate=>false,    # For compressors that support munging/mangling
  #   :keep_src=>true       # Creates another file, ex: app-src.js
  
  # Or use sprockets 
  # sprockets 'app.js', 
  #   :src=>'app/index.js', 
  #   :paths=>['./lib'], 
  #   :prune=>true, 
  #   :root=>'./src', 
  #   :compress=>:packr, 
  #   :keep_src=>true
end

# All Gumdrop Hooks: on_start, on_before_scan, on_scan, on_before_generate, on_generate, on_before_render, on_render, on_end
Gumdrop.on :start do |event|
  puts "Gumdrop v#{Gumdrop::VERSION} building..."
end
# on_end do |site|  end


# View helpers (available in rendering context):
Gumdrop.view_helpers do

  # Calculate the years for a copyright
  def copyright_years(start_year, divider="&#8211;")
    end_year = Date.today.year
    if start_year == end_year
      "#{start_year}"
    else
      "#{start_year}#{divider}#{end_year}"
    end
  end
  
  #
  # Your custom helpers go here!
  #

end

# Add (thor) tasks to gumdrop command
# for more: https://github.com/wycats/thor/wiki
# Gumdrop.cli do
  
  # desc 'sync', "Syncs with public server using rsync (if configured)"  
  # method_option :build, :aliases => '-b', :desc => 'Build content before syncing'
  # method_option :dry_run, :aliases => '-d', :desc => 'Dry run'
  # def sync
  #   Gumdrop.site.build if options[:build]
  #   config= Gumdrop.site.config
  #   output= Gumdrop.site.output_path
  #   cmd= "rsync -avz --delete #{output} #{config.server_user}@#{config.server}:#{config.server_path}"
  #   puts "Running:\n#{cmd}\n"
  #   system(cmd) unless options[:dry_run]
  # end

# end

# Any specialized code for your site goes here...

# require 'slim'
# Slim::Engine.set_default_options pretty:true
